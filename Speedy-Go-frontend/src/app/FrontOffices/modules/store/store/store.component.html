<app-header-front></app-header-front>
<!-- Start Hero Section -->
<div class="hero">
  <div class="container">
    <div class="row justify-content-between">
      <div class="col-lg-5">
        <div class="intro-excerpt">
          <h1>Modern Interior Delivery Studio <span class="d-block"></span></h1>
          <p class="mb-4">Discover top offers delivered straight to your door.
            A curated selection of stylish and practical items to elevate your living space.</p>
          <p><a href="" class="btn btn-secondary me-2">Shop Now</a><a href="#" class="btn btn-white-outline">Explore</a></p>
        </div>
      </div>
      <div class="col-lg-7">
        <div class="hero-img-wrap">
          <img src="/assets/FrontOffice/img/partnaire.png" class="img-fluid">
        </div>
      </div>
    </div>
  </div>
</div> 




  <!-- Bootstrap CSS -->
  <link href="/assets/FrontOffice/css2/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="/assets/FrontOffice/css2/tiny-slider.css" rel="stylesheet">
  <link href="/assets/FrontOffice/css2/style.css" rel="stylesheet">
  
  <!-- Bootstrap JS -->
  <script src="/assets/FrontOffice/js2/bootstrap.bundle.min.js"></script>
  <script src="/assets/FrontOffice/js2/tiny-slider.js"></script>
  <script src="/assets/FrontOffice/js2/custom.js"></script>



















<div class="speedgo-store-container" [ngClass]="{'speedgo-dark-mode': isDarkMode}">
    <div class="speedgo-header-section">
      <h1>Store Management</h1>
      <div class="speedgo-header-actions">
        <button *ngIf="canEditOrDelete()" class="speedgo-btn-primary" (click)="openStore(0, 'add')">
          <i class="fas fa-plus"></i> New Store
        </button>
        <button class="speedgo-btn-primary speedgo-dark-toggle" (click)="toggleDarkMode()">
          <i class="fas" [ngClass]="isDarkMode ? 'fa-sun' : 'fa-moon'"></i>
          {{ isDarkMode ? 'Light Mode' : 'Dark Mode' }}
        </button>
      </div>
    </div>
  
    <!-- Recommendation API Key Input -->
    <div class="speedgo-api-key-section">
      <div class="speedgo-api-key-container">
        <div class="speedgo-api-key-status">
          <i class="fas fa-check-circle"></i> Recommendations are enabled with the LLM : llama3-70b-8192 !
        </div>
      </div>
    </div>
  
    <!-- Recommended Stores Section -->
    <div *ngIf="recommendationsEnabled && recommendedStores.length > 0 && userRole === 'CUSTOMER'" class="speedgo-recommended-section">
      <h2 class="speedgo-recommended-title">Recommended Stores For You</h2>
      <div class="speedgo-recommended-stores">
        <div *ngFor="let store of recommendedStores" class="speedgo-recommended-store-card">
          <div class="speedgo-recommended-store-image">
            <img [src]="store.image || 'assets/images/store-placeholder.jpg'" alt="{{ store.name }}">
            <div class="speedgo-recommended-badge">Recommended</div>
          </div>
          <div class="speedgo-recommended-store-info">
            <h3>{{ store.name }}</h3>
            <p class="speedgo-store-type">{{ store.storeType }}</p>
            <p class="speedgo-store-description">{{ store.description | slice:0:100 }}{{ store.description.length > 100 ? '...' : '' }}</p>
            <div class="speedgo-recommended-store-footer">
              <span class="speedgo-store-status" [ngClass]="store.storeStatus.toLowerCase()">
                {{ store.storeStatus }}
              </span>
              <button class="speedgo-btn-secondary" (click)="store.storeID && viewStore(store.storeID)">
                View Details
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <div class="speedgo-filters-section">
      <div class="speedgo-search-input">
        <input type="text" placeholder="Search stores..." (input)="search($event)">
        <i class="speedgo-icon-search">üîç</i>
      </div>
  
      <div class="speedgo-select-wrapper">
        <select [(ngModel)]="selectedType" (change)="filterByType(selectedType)">
          <option value="">All Types</option>
          <option *ngFor="let type of storeTypes" [value]="type">
            {{type}}
          </option>
        </select>
        <i class="speedgo-icon-chevron-down">‚¨áÔ∏è</i>
      </div>
  
      <div class="speedgo-select-wrapper">
        <select [(ngModel)]="selectedStatus" (change)="filterByStatus(selectedStatus)">
          <option value="">All Statuses</option>
          <option *ngFor="let status of storeStatuses" [value]="status">
            {{status}}
          </option>
        </select>
        <i class="speedgo-icon-chevron-down">‚¨áÔ∏è</i>
      </div>
    </div>
  
    <div *ngIf="loading" class="speedgo-loading-spinner">
      <div class="speedgo-spinner"></div>
    </div>
  
    <div *ngIf="!loading && filteredStores.length === 0" class="speedgo-no-results">
      <i class="speedgo-icon-search-off">üö´</i>
      <p>No stores found. Try changing your filters or add a new store.</p>
    </div>
  
    <div class="speedgo-store-grid" *ngIf="!loading && filteredStores.length > 0">
      <div *ngFor="let store of paginatedStores" class="speedgo-store-card">
        <div class="speedgo-card-image" [style.background-image]="'url(' + store.image + ')'">
          <div class="speedgo-card-badges">
            <span class="speedgo-store-type" [ngClass]="store.storeType.toLowerCase()">
              <i [class]="'speedgo-icon-' + getStoreTypeIcon(store.storeType)">
                {{ getStoreTypeIcon(store.storeType) }}
              </i>
              {{store.storeType}}
            </span>
            <span class="speedgo-store-status" [ngClass]="store.storeStatus.toLowerCase()">
              <i [class]="'speedgo-icon-' + getStatusIcon(store.storeStatus)">
                {{ getStatusIcon(store.storeStatus) }}
              </i>
            </span>
          </div>
        </div>
        
        <div class="speedgo-card-content">
          <h2 class="speedgo-store-title">{{store.name}}</h2>
          <p class="speedgo-store-description">{{store.description | slice:0:100}}{{store.description.length > 100 ? '...' : ''}}</p>
          
          <div class="speedgo-store-details">
            <div class="speedgo-detail-item time">
              <i class="fas fa-clock"></i>
              <span *ngIf="store.opening && store.closing">{{store.opening}} - {{store.closing}}</span>
              <span *ngIf="!store.opening || !store.closing" class="error-message">Opening Time and Closing Time are required</span>
            </div>
            <div class="speedgo-detail-item phone">
              <i class="fas fa-phone"></i>
              <span>{{store.phone || 'No phone provided'}}</span>
            </div>
            <div class="speedgo-detail-item location">
              <i class="fas fa-map-marker-alt"></i>
              <span>{{store.city || 'No location provided'}}</span>
            </div>
          </div>
        </div>
        
        <div class="speedgo-card-actions">
          <button class="speedgo-btn-icon speedgo-btn-view" title="View Offers">
            <i class="fas fa-eye" (click)="store.storeID && goToOffre(store.storeID)"></i>
          </button>
          <button class="speedgo-btn-icon speedgo-btn-edit" (click)="store.storeID && openStore(store.storeID, 'edit')" *ngIf="userRole !== 'CUSTOMER'" title="Edit Store">
            <i class="fas fa-edit"></i>
          </button>
          <button class="speedgo-btn-icon speedgo-btn-delete" (click)="store.storeID && deleteStore(store.storeID)" *ngIf="userRole !== 'CUSTOMER'" title="Delete Store">
            <i class="fas fa-trash"></i>
          </button>
          <button class="speedgo-btn-icon speedgo-btn-add" (click)="store.storeID && addOffer(store.storeID)" *ngIf="userRole !== 'CUSTOMER'" title="Add Offer">
            <i class="fas fa-plus"></i>
          </button>
        </div>
      </div>
    </div>
  
    <div *ngIf="filteredStores.length > pageSize" class="speedgo-pagination">
      <button class="speedgo-pagination-button" (click)="previousPage()" [disabled]="pageIndex === 0">
        <i class="fas fa-chevron-left"></i> Previous
      </button>
      
      <div class="speedgo-pagination-numbers">
        <button *ngFor="let page of getPaginationArray()" 
                class="speedgo-pagination-number" 
                [ngClass]="{'active': pageIndex === page - 1}"
                (click)="goToPage(page - 1)">
          {{page}}
        </button>
      </div>
      
      <button class="speedgo-pagination-button" (click)="nextPage()" [disabled]="pageIndex >= totalPages - 1">
        Next <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>

<!-- Debug Panel for demonstration purposes -->
<div *ngIf="showDebugPanel" class="speedgo-debug-panel">
  <div class="speedgo-debug-header">
    <h3>Recommender System Debug Panel üîç</h3>
    <button class="speedgo-debug-close" (click)="showDebugPanel = false">√ó</button>
  </div>
  <div class="speedgo-debug-content">
    <div class="speedgo-debug-section">
      <h4>User Profile</h4>
      <pre>{{ userDebugInfo | json }}</pre>
      <button class="speedgo-btn-primary" (click)="setTestDemographicData()" style="margin-top: 10px;">
        Set Test Demographics
      </button>
      <small style="display: block; margin-top: 5px; color: #888;">For demonstration purposes only</small>
    </div>
    <div class="speedgo-debug-section">
      <h4>Raw User Data</h4>
      <div style="max-height: 150px; overflow-y: auto; background: #f5f5f5; padding: 10px; font-size: 12px; border-radius: 4px;">
        <pre>{{ userDebugInfo.rawUserData }}</pre>
      </div>
    </div>
    <div class="speedgo-debug-section">
      <h4>Recommendation Process</h4>
      <p>1. User profile data extracted</p>
      <p>2. Store data prepared</p>
      <p>3. LLM prompt generated</p>
      <p>4. Query sent to Groq API (llama3-70b-8192)</p>
      <p>5. Response processed and ranked</p>
      <p>6. Results displayed to user</p>
    </div>
    <div class="speedgo-debug-section">
      <h4>LLM Explanations</h4>
      <div *ngFor="let explanation of recommendationExplanations" class="speedgo-explanation-item">
        <p><strong>Item #{{ explanation.id }}:</strong> {{ explanation.text }}</p>
      </div>
      <p *ngIf="!recommendationExplanations.length" class="speedgo-no-data">No explanations available yet.</p>
    </div>
  </div>
  <div class="speedgo-debug-footer">
    <p>Check browser console for detailed logs (F12)</p>
    <p><small>Groq API Key: {{ maskedApiKey }}</small></p>
  </div>
</div>

<!-- Button to toggle debug panel -->
<button class="speedgo-debug-toggle" (click)="toggleDebugPanel()" title="Show Recommender Debug Panel">
  <i class="fas fa-flask"></i> Demo Mode
</button>







<app-footer-front></app-footer-front>